@Test
void test_createArchivalFileNetConfig_shouldThrowSharedServiceLayerException() {
    ArchivalFileNetConfigObj input = new ArchivalFileNetConfigObj();
    ArchFileNetConfigDto dto = new ArchFileNetConfigDto();

    // mock mapper
    ArchivalFilenetConfigService spyService = Mockito.spy(archivalFilenetConfigService);
    doReturn(dto).when(spyService).configToDto(input);

    // simulate exception during save
    when(filenetConfigRepository.saveAndFlush(any())).thenThrow(new RuntimeException("DB error"));

    SharedServiceLayerException ex = assertThrows(
        SharedServiceLayerException.class,
        () -> spyService.createArchivalFileNetConfig(input)
    );

    assertTrue(ex.getMessage().contains("Failed to create archival filenet config"));
}