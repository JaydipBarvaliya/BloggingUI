package com.td.besig.opsapi.service;

import com.td.besig.opsapi.dto.ArchPurgeConfigurationDto;
import com.td.besig.opsapi.mapper.EntityToDTOMapper;
import com.td.besig.opsapi.model.ArchPurgeConfiguration;
import org.junit.jupiter.api.Test;
import static org.junit.jupiter.api.Assertions.*;
import static org.mockito.Mockito.*;

class ArchivalApiPurgeConfigServiceTest {

    private final ArchivalApiPurgeConfigService purgeService = new ArchivalApiPurgeConfigService(null);

    @Test
    void testDtoToEntity_NullInput() {
        ArchPurgeConfiguration result = purgeService.dtoToEntity(null);

        assertNotNull(result);
        assertTrue(result instanceof ArchPurgeConfiguration);
    }

    @Test
    void testDtoToEntity_ValidInput() {
        // Mock DTO
        ArchPurgeConfigurationDto dto = new ArchPurgeConfigurationDto();
        dto.setId(1L);
        dto.setPurgeTableName("testTable");

        // Spy on the mapper
        EntityToDTOMapper mapperSpy = spy(EntityToDTOMapper.INSTANCE);
        doReturn(new ArchPurgeConfiguration()).when(mapperSpy).toEntity(dto);

        ArchPurgeConfiguration result = purgeService.dtoToEntity(dto);

        assertNotNull(result);
        verify(mapperSpy, times(1)).toEntity(dto);
    }
}