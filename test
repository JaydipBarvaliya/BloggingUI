@Test
void test_getArchivalFileNetConfigList_shouldMapEntityToDto() {
    // Arrange
    String lobId = "LOB123";

    ArchFileNetConfig mockEntity = new ArchFileNetConfig();
    ArchivalFileNetConfigObj mockDto = new ArchivalFileNetConfigObj();

    List<ArchFileNetConfig> entityList = List.of(mockEntity);

    // Create a spy of the service
    ArchivalFilenetConfigService spyService = Mockito.spy(new ArchivalFilenetConfigService(repo));

    // VERY IMPORTANT: Mock repo.findAll(spec) to return your entityList
    when(repo.findAll(any(Specification.class))).thenReturn(entityList);

    // Mock entityToDto so it returns expected DTO
    doReturn(mockDto).when(spyService).entityToDto(mockEntity);

    // Act
    List<ArchivalFileNetConfigObj> result = spyService.getArchivalFileNetConfigList(lobId);

    // Assert
    assertEquals(1, result.size()); // This is what was failing
    assertSame(mockDto, result.get(0));
}