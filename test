@Test
void test_createArchivalStorageConfig_shouldThrowSharedServiceLayerException() {
    // Arrange
    String lobId = "LOB123";
    ArchLobStorageMappingService spyService = Mockito.spy(new ArchLobStorageMappingService(repo));

    // Stub dtoToEntity to avoid null
    ArchLobStorageConfig dummyEntity = new ArchLobStorageConfig();
    doReturn(dummyEntity).when(spyService).dtoToEntity(any());

    // Throw exception during save
    when(repo.saveAndFlush(any())).thenThrow(new RuntimeException("DB error"));

    // Act + Assert
    SharedServiceLayerException exception = assertThrows(
        SharedServiceLayerException.class,
        () -> spyService.createArchivalStorageConfig(lobId)
    );

    assertTrue(exception.getMessage().contains("Failed to create archival storage config"));
}