@ExtendWith(MockitoExtension.class)
class ArchivalApiMetadataDelegateImplTest {

    @InjectMocks
    private ArchivalApiMetadataDelegateImpl archivalApiMetadataDelegate;

    @Mock
    private ArchivalApiMetadataService archivalApiMetadataService;

    @Mock
    private BesigOpsApiUtil besigopsapiUtil;

    @Test
    void testSearchArchivalMetadataMapping_ExceptionThrown() {
        // Given
        String mapType = "testMapType";
        HttpHeaders httpHeaders = new HttpHeaders();

        // Mock the behavior to throw an exception
        doThrow(new RuntimeException("Test Exception"))
            .when(archivalApiMetadataService)
            .getArchivalMetadataMappingList(mapType);

        // When & Then
        SharedServiceLayerException exception = assertThrows(
            SharedServiceLayerException.class, 
            () -> archivalApiMetadataDelegate.searchArchivalMetadataMapping(mapType)
        );

        // Assert exception message
        assertTrue(exception.getMessage().contains("Test Exception"));
    }
}